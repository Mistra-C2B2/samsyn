# Production Environment Variables
# Copy to .env.prod and fill with actual values
# NEVER commit .env.prod to version control

# ===== Database Configuration =====
POSTGRES_USER=samsyn
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
POSTGRES_DB=samsyn

# PostgreSQL Performance Tuning
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=16MB
POSTGRES_MAINTENANCE_WORK_MEM=128MB

# SQLAlchemy Connection Pool Configuration
# IMPORTANT: Adjust based on backend replicas count!
# Total DB connections = (DB_POOL_SIZE + DB_MAX_OVERFLOW) × number_of_backend_replicas
#
# Single Backend (replicas: 1):
#   DB_POOL_SIZE=20, DB_MAX_OVERFLOW=30 → 50 total connections
#
# Multiple Backends (replicas: 3):
#   DB_POOL_SIZE=15, DB_MAX_OVERFLOW=15 → 30 per instance × 3 = 90 total connections
#
# Ensure PostgreSQL max_connections >= total connections + 10 (buffer for admin)
DB_POOL_SIZE=15              # Base number of persistent connections per backend instance
DB_MAX_OVERFLOW=15           # Additional connections during spikes per backend instance
DB_POOL_RECYCLE=1800         # Recycle connections after N seconds (prevents stale connections)
DB_POOL_TIMEOUT=60           # Wait N seconds for connection before timing out

# ===== Traefik Domain =====
DOMAIN=samsyn.yourdomain.com

# ===== Frontend Configuration =====
# These are baked into the build - update requires rebuild
VITE_CLERK_PUBLISHABLE_KEY=pk_live_your_production_key
VITE_API_URL=https://samsyn.yourdomain.com

# ===== Backend Configuration =====
# Clerk Authentication (used by both frontend build and backend runtime)
CLERK_SECRET_KEY=sk_live_your_production_secret
CLERK_PUBLISHABLE_KEY=pk_live_your_production_key
CLERK_WEBHOOK_SECRET=whsec_your_production_webhook_secret
CLERK_JWKS_URL=https://clerk.samsyn.yourdomain.com/.well-known/jwks.json

# Frontend URL (for CORS configuration)
FRONTEND_URL=https://samsyn.yourdomain.com

# Global Fishing Watch API Token (optional, server-side only)
# Required if you want to use GFW data layers
# Get from https://globalfishingwatch.org/our-apis/
# IMPORTANT: This token is kept server-side and never exposed to the frontend
GFW_API_TOKEN=your_gfw_production_token
